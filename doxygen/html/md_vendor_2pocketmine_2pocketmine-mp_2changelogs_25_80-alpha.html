<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doubacore: 5.0-alpha</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Doubacore<span id="projectnumber">&#160;0.2.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">5.0-alpha</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>For Minecraft: Bedrock Edition 1.19.0</b></p>
<h1><a class="anchor" id="autotoc_md1338"></a>
5.0.0-ALPHA1</h1>
<p>Released 6th July 2022.</p>
<p>This is a development snapshot of 5.0.0, an upcoming major update <a class="el" href="protocolto-p.html">to</a> PocketMine-MP. This version includes many new improvements, including support for Bedrock worlds from 1.13 onwards, a large array of new blocks, and various changes <a class="el" href="protocolto-p.html">to</a> the plugin API.</p>
<h2><a class="anchor" id="autotoc_md1339"></a>
WARNING</h2>
<p><b>This is an ALPHA release.</b> It is an early development snapshot of the upcoming 5.0.0 release. This means it is LIKELY <a class="el" href="protocolto-p.html">to</a> be unstable, and/or have performance issues not found in the latest stable releases.</p>
<p><b>BACK UP your data before testing this.</b> This version will work with worlds and player data from 4.x, <b>BUT</b> any world or player data loaded in 5.0.0 <b>will not work in 4.x</b> due <a class="el" href="protocolto-p.html">to</a> backwards-incompatible storage format changes.</p>
<p>In addition, there are a number of breaking API changes. Plugins for 4.x may require code changes <a class="el" href="protocolto-p.html">to</a> run on this version.</p>
<p>The API is <b>not finalized</b>. You should expect further changes in later alphas.</p>
<h2><a class="anchor" id="autotoc_md1340"></a>
Core</h2>
<ul>
<li>Worlds are now saved according <a class="el" href="protocolto-p.html">to</a> the Bedrock 1.19.0 format.</li>
<li>Worlds generated by Bedrock from 1.13.0 and up are now supported (previously, only worlds up <a class="el" href="protocolto-p.html">to</a> 1.12 were supported).</li>
<li><code>/particle</code> now accepts strings for particle data instead of integers.</li>
<li><code>/particle</code> no longer accepts integers for block or item IDs.</li>
<li>The usage of <code>blockcrack</code>, <code>iconcrack</code> and <code>blockdust</code> particle types in <code>/particle</code> now follows the same pattern as other particle types, with the data for each being passed in the <code>data</code> parameter instead of being baked into the particle name.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1341"></a>
Tools</h2>
<ul>
<li>The following tool scripts have been added:<ul>
<li><code>generate-block-palette-spec.php</code> - generates a JSON file with a readable overview of blocks, their state properties, and their possible values</li>
<li><code>generate-blockstate-upgrade-schema.php</code> - generates JSON blockstate upgrade schemas like those found in <a href="https://github.com/pmmp/BedrockBlockUpgradeSchema">BedrockBlockUpgradeSchema</a></li>
<li><code>generate-item-upgrade-schema.php</code> - generates JSON item ID/meta upgrade schemas like those found in <a href="https://github.com/pmmp/BedrockItemUpgradeSchema">BedrockItemUpgradeSchema</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1342"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1343"></a>
Blocks</h3>
<ul>
<li>Added the following new blocks:<ul>
<li>Amethyst Block</li>
<li>Ancient Debris</li>
<li>Basalt</li>
<li>Blackstone blocks, slabs, stairs, and walls</li>
<li>Calcite</li>
<li>Chiseled Deepslate</li>
<li>Chiseled Nether Bricks</li>
<li>Chiseled Polished Blackstone</li>
<li>Cobbled Deepslate blocks, slabs, stairs, and walls</li>
<li>Copper Ore</li>
<li>Cracked Deepslate Bricks</li>
<li>Crached Deepslate Tiles</li>
<li>Cracked Nether Bricks</li>
<li>Cracked Polished Blackstone Bricks</li>
<li>Crimson buttons, doors, fences, fence gates, hyphae, planks, pressure plates, signs, slabs, stairs, stems, and trapdoors</li>
<li>Deepslate</li>
<li>Deepslate Bricks blocks, slabs, stairs, and walls</li>
<li>Deepslate Ores (coal, copper, diamond, emerald, gold, iron, lapis lazuli, redstone)</li>
<li>Deepslate Tiles blocks, slabs, stairs, and walls</li>
<li>Honeycomb Block</li>
<li>Light Block</li>
<li>Mangrove buttons, doors, fences, fence gates, logs, planks, pressure plates, signs, slabs, stairs, trapdoors, and wood</li>
<li>Mud Bricks blocks, slabs, stairs, and walls</li>
<li>Nether Gold Ore</li>
<li>Polished Basalt</li>
<li>Polished Blackstone blocks, buttons, pressure plates, slabs, stairs, and walls</li>
<li>Polished Blackstone Bricks blocks, slabs, stairs, and walls</li>
<li>Polished Deepslate blocks, slabs, stairs, and walls</li>
<li>Quartz Bricks</li>
<li>Shroomlight</li>
<li>Smooth Basalt</li>
<li>Soul Fire</li>
<li>Soul Lantern</li>
<li>Soul Soil</li>
<li>Soul Torch</li>
<li>Tuff</li>
<li>Warped buttons, doors, fences, fence gates, hyphae, planks, pressure plates, signs, slabs, stairs, stems, and trapdoors</li>
</ul>
</li>
<li>Added support for basalt generators</li>
<li>Iron Ore and Gold Ore now drop Raw Iron and Raw Gold respectively, instead of the ore blocks.</li>
<li>Item frames can now be placed on the top and bottom of blocks.</li>
<li>All-sided logs ("wood", for want of a better name) can now be placed in X, Y, and Z orientations.</li>
<li>Walls now connect when placed, following the pre-1.16 logic. (1.16 logic is planned <a class="el" href="protocolto-p.html">to</a> be implemented, but currently low priority.)</li>
<li>Stripping logs by right-clicking them with an axe is now supported.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1344"></a>
Items</h3>
<ul>
<li>Added the following new items:<ul>
<li>Amethyst Shard</li>
<li>Copper Ingot</li>
<li>Disc Fragment (5)</li>
<li>Echo Shard</li>
<li>Glow Ink Sac</li>
<li>Honeycomb</li>
<li>Phantom Membrane</li>
<li>Raw Copper</li>
<li>Raw Gold</li>
<li>Raw Iron</li>
<li>Spyglass</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1345"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1346"></a>
General</h3>
<ul>
<li>Protected and public properties now use native property types wherever possible.</li>
<li>Parameter and return typehints have been applied in many places where it wasn't previously possible.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1347"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<h4><a class="anchor" id="autotoc_md1348"></a>
Runtime block representation</h4>
<ul>
<li>Blocks no longer use internal Minecraft IDs and metadata <a class="el" href="protocolto-p.html">to</a> identify themselves. All APIs associated with legacy IDs and meta have been removed.</li>
<li>A new set of runtime IDs generated from <code>VanillaBlocks</code> is used <a class="el" href="protocolto-p.html">to</a> identify block types. These IDs are defined in <code>BlockTypeIds</code>.<ul>
<li>These new IDs are used for runtime representation of blocks on chunks, and for type comparison purposes.</li>
<li>Block type IDs are used at <b>runtime only</b>. They should <b>NOT</b> be stored in configs or databases, as they are subject <a class="el" href="protocolto-p.html">to</a> change without warning.</li>
</ul>
</li>
<li>Block state properties (e.g. facing, colour, etc.) are now represented by PM-specific state data instead of legacy metadata. The state data consists of:<ul>
<li>Dynamic type data - this is retained by items when the block is broken (colour, wet/dry, coral type, etc.) - handled by <code>Block-&gt;decodeType()</code> and <code>Block-&gt;encodeType()</code></li>
<li>State data - this is discarded when the block is broken (facing direction, lit/unlit, powered/unpowered, etc.) - handled by <code>Block-&gt;decodeState()</code> and <code>Block-&gt;encodeState()</code></li>
</ul>
</li>
</ul>
<p><b>Block type IDs, and state/type data, are intended for use at RUNTIME only. The values of type IDs and state data may change without warning. They should NOT be saved in configs or databases.</b></p>
<h4><a class="anchor" id="autotoc_md1349"></a>
Implementing new blocks</h4>
<p>To register a new block, the following changes are now required:</p>
<ul>
<li>Add a new type ID <a class="el" href="protocolto-p.html">to</a> <code>BlockTypeIds</code></li>
<li>Register the block in <code>BlockFactory</code></li>
<li>Amend <code>VanillaBlocks</code> <a class="el" href="protocolto-p.html">to</a> include the new block</li>
<li>Amend <code>BlockStateToBlockObjectDeserializer</code> <a class="el" href="protocolto-p.html">to</a> deserialize the block from disk</li>
<li>Amend <code>BlockObjectToBlockStateSerializer</code> <a class="el" href="protocolto-p.html">to</a> serialize the block for disk</li>
<li>Optionally, amend <code>StringToItemParser</code> <a class="el" href="protocolto-p.html">to</a> add string alias(es) for the block, so that it can be given via <code>/give</code></li>
</ul>
<p>This is admittedly rather more of a hassle than in the old days, but that's the price of abstraction. Research is underway for ways <a class="el" href="protocolto-p.html">to</a> improve this without spaghettifying the code again.</p>
<h4><a class="anchor" id="autotoc_md1350"></a>
Change list</h4>
<ul>
<li>The following classes have been removed:<ul>
<li><code>BlockIdentifierFlattened</code></li>
<li><code>BlockLegacyIds</code></li>
<li><code>BlockLegacyMetadata</code></li>
<li><code>utils\ColorInMetadataTrait</code> - <code>utils\ColoredTrait</code> now implements colour type data serialization uniformly</li>
<li><code>utils\InvalidBlockStateException</code> - this has been superseded by <code>pocketmine\data\runtime\InvalidSerializedRuntimeDataException</code></li>
<li><code>utils\NormalHorizontalFacingInMetadataTrait</code> - <code>utils\HorizontalFacingTrait</code> now implements facing type data serialization uniformly</li>
<li><code>utils\PillarRotationInMetadataTrait</code> - <code>utils\PillarRotationTrait</code> now implements rotation type data serialization uniformly</li>
<li><code>utils\BlockDataSerializer</code></li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>BaseFire</code></li>
<li><code>SoulFire</code></li>
<li><code>BlockTypeIds</code><ul>
<li>This is a generated enum of PocketMine-MP-specific block type IDs</li>
<li>There is one for every entry in <code>VanillaBlocks</code></li>
<li>Do NOT save these IDs in a config or database, as they may change without warning</li>
<li>Block type IDs are intended for comparison purposes only</li>
<li>Block type IDs cannot be negative</li>
</ul>
</li>
<li><code>CopperOre</code></li>
<li><code>GoldOre</code></li>
<li><code>IronOre</code></li>
<li><code>Light</code></li>
<li><code>NetherGoldOre</code></li>
<li><code>utils\WallConnectionType</code> - enum of all possible wall connection types</li>
<li><code>utils\WoodType</code> - enum of all possible wood types, used for wood material blocks like planks and logs</li>
<li><code>utils\WoodTypeTrait</code></li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>Block-&gt;getId()</code> - for type comparisons, use <code>Block-&gt;getTypeId()</code> instead</li>
<li><code>Block-&gt;getMeta()</code> - for state comparisons, use <code>Block-&gt;getStateId()</code> instead</li>
<li><code>Block-&gt;readStateFromData()</code></li>
<li><code>Block-&gt;writeStateToMeta()</code></li>
<li><code>Block-&gt;writeStateToItemMeta()</code></li>
<li><code>Block-&gt;getStateBitmask()</code></li>
<li><code>BlockFactory-&gt;get()</code><ul>
<li>To get a block at runtime, e.g. stone, use <code>VanillaBlocks::STONE()</code></li>
<li>To load a block from old config or database data:<ol type="1">
<li>Use <code>GlobalBlockStateHandlers::getUpgrader()-&gt;upgradeIntIdMeta()</code> <a class="el" href="protocolto-p.html">to</a> convert it <a class="el" href="protocolto-p.html">to</a> modern data</li>
<li>Pass the data <a class="el" href="protocolto-p.html">to</a> <code>GlobalBlockStateHandlers::getDeserializer()</code> <a class="el" href="protocolto-p.html">to</a> get a blockstate ID</li>
<li>Pass the blockstate ID <a class="el" href="protocolto-p.html">to</a> <code>BlockFactory::fromStateId()</code> <a class="el" href="protocolto-p.html">to</a> get a <code>Block</code> instance</li>
</ol>
</li>
</ul>
</li>
<li><code>BlockIdentifier-&gt;getBlockId()</code></li>
<li><code>BlockIdentifier-&gt;getAllBlockIds()</code></li>
<li><code>BlockIdentifier-&gt;getVariant()</code></li>
<li><code>BlockIdentifier-&gt;getItemId()</code></li>
<li><code>Door-&gt;isPowered()</code></li>
<li><code>Door-&gt;setPowered()</code></li>
<li><code>Skull-&gt;isNoDrops()</code></li>
<li><code>Skull-&gt;setNoDrops()</code></li>
<li><code>VanillaBlocks::*_GLAZED_TERRACOTTA()</code> - use <code>VanillaBlocks::GLAZED_TERRACOTTA()-&gt;setColor(DyeColor::WHATEVER())</code> instead</li>
<li><code>utils\FallableTrait-&gt;getId()</code> is no longer required</li>
<li><code>utils\FallableTrait-&gt;getMeta()</code> is no longer required</li>
</ul>
</li>
<li>The following constants have been renamed:<ul>
<li><code>Block::INTERNAL_METADATA_BITS</code> -&gt; <code>Block::INTERNAL_STATE_DATA_BITS</code></li>
<li><code>Block::INTERNAL_METADATA_MASK</code> -&gt; <code>Block::INTERNAL_STATE_DATA_MASK</code></li>
</ul>
</li>
<li>The following API methods have been renamed:<ul>
<li><code>Block-&gt;getFullId()</code> -&gt; <code>Block-&gt;getStateId()</code></li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>BlockIdentifier-&gt;__construct()</code> now accepts <code>int $blockTypeId</code>, and no longer accepts <code>int $blockId, int $variant, ?int $itemId</code></li>
<li><code>ItemFrame-&gt;getFacing()</code> may now return <code>Facing::UP</code> and <code>Facing::DOWN</code></li>
<li><code>ItemFrame-&gt;setFacing()</code> now accepts <code>Facing::UP</code> and <code>Facing::DOWN</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>protected Block-&gt;decodeState()</code> - encodes the block's state properties, e.g. facing, powered/unpowered, etc.</li>
<li><code>protected Block-&gt;decodeType()</code> - encodes the block's type properties, e.g. colour, wet/dry, coral type, etc.</li>
<li><code>public Block-&gt;getRequiredStateDataBits()</code> - returns the number of bits required <a class="el" href="protocolto-p.html">to</a> encode the block's state data</li>
<li><code>public Block-&gt;getRequiredTypeDataBits()</code> - returns the number of bits required <a class="el" href="protocolto-p.html">to</a> encode the block's type data</li>
<li><code>public BlockIdentifier-&gt;getBlockTypeId()</code> - returns the block's type ID according <a class="el" href="protocolto-p.html">to</a> <code>BlockTypeIds</code></li>
<li><code>public GlazedTerracotta-&gt;getColor()</code> (from <code>ColoredTrait</code>) - this was previously unsupported due <a class="el" href="protocolto-p.html">to</a> legacy limitations</li>
<li><code>public GlazedTerracotta-&gt;setColor()</code> (from <code>ColoredTrait</code>) - this was previously unsupported due <a class="el" href="protocolto-p.html">to</a> legacy limitations</li>
<li><code>public Wall-&gt;getConnections()</code> - returns the wall's connections and their types (see <code>utils\WallConnectionType</code>)</li>
<li><code>public Wall-&gt;setConnections()</code> - sets the wall's connections and their types (see <code>utils\WallConnectionType</code>)</li>
<li><code>public Wall-&gt;getConnection()</code></li>
<li><code>public Wall-&gt;setConnection()</code></li>
<li><code>public Wall-&gt;isPost()</code></li>
<li><code>public Wall-&gt;setPost()</code></li>
<li><code>public Wood-&gt;isStripped()</code></li>
<li><code>public Wood-&gt;setStripped()</code></li>
</ul>
</li>
<li>The following classes now use new traits, adding API methods and/or properties:<ul>
<li><code>FenceGate</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>GlazedTerracotta</code> uses <code>utils\ColoredTrait</code></li>
<li><code>Planks</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>Wood</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenButton</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenDoor</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenFence</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenPressurePlate</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenSlab</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenStairs</code> uses <code>utils\WoodTypeTrait</code></li>
<li><code>WoodenTrapdoor</code> uses <code>utils\WoodTypeTrait</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1351"></a>
&lt;tt&gt;pocketmine\crafting&lt;/tt&gt;</h3>
<ul>
<li>The following classes have been added:<ul>
<li><code>RecipeIngredient</code> interface</li>
<li><code>ExactRecipeIngredient</code> - matches an exact item</li>
<li><code>MetaWildcardRecipeIngredient</code> - matches an item with the given legacy Minecraft ID, but any metadata value</li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>FurnaceRecipe-&gt;__construct()</code> now accepts <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>FurnaceRecipe-&gt;getInput()</code> now returns <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>PotionContainerChangeRecipe-&gt;__construct()</code> now accepts <code>string, RecipeIngredient, string</code> (using Minecraft string IDs instead of legacy integers).</li>
<li><code>PotionContainerChangeRecipe-&gt;getIngredient()</code> now returns <code>RecipeIngredient</code> instead of <code>Item</code>.</li>
<li><code>PotionContainerChangeRecipe-&gt;getInputItemId()</code> now returns <code>string</code> (using Minecraft string IDs instead of legacy integers).</li>
<li><code>PotionContainerChangeRecipe-&gt;getOutputItemId()</code> now returns <code>string</code> (using Minecraft string IDs instead of legacy integers).</li>
<li><code>PotionTypeRecipe-&gt;__construct()</code> now accepts <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>PotionTypeRecipe-&gt;getIngredient()</code> now returns <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>PotionTypeRecipe-&gt;getInput()</code> now returns <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>ShapedRecipe-&gt;__construct()</code> now accepts <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>ShapedRecipe-&gt;getIngredient()</code> now returns <code>?RecipeIngredient</code> instead of <code>?Item</code></li>
<li><code>ShapedRecipe-&gt;getIngredientList()</code> now returns <code>RecipeIngredient[]</code> instead of <code>Item[]</code></li>
<li><code>ShapedRecipe-&gt;getIngredientMap()</code> now returns <code>RecipeIngredient[][]</code> instead of <code>Item[][]</code></li>
<li><code>ShapelessRecipe-&gt;__construct()</code> now accepts <code>RecipeIngredient</code> instead of <code>Item</code></li>
<li><code>ShapelessRecipe-&gt;getIngredientList()</code> now returns <code>RecipeIngredient[]</code> instead of <code>Item[]</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1352"></a>
&lt;tt&gt;pocketmine\entity&lt;/tt&gt;</h3>
<ul>
<li><code>Entity</code> now declares new abstract methods which must be implemented by subclasses:<ul>
<li><code>public Entity-&gt;getInitialDragMultiplier()</code></li>
<li><code>public Entity-&gt;getInitialGravity()</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1353"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<h4><a class="anchor" id="autotoc_md1354"></a>
Runtime item representation</h4>
<ul>
<li>Items no longer use internal Minecraft string IDs and metadata <a class="el" href="protocolto-p.html">to</a> identify themselves. All APIs associated with legacy IDs and/or meta have been removed.</li>
<li>A new set of runtime item IDs generated from <code>VanillaItems</code> is now used <a class="el" href="protocolto-p.html">to</a> identify item types. These IDs are defined in <code>ItemTypeIds</code>.<ul>
<li>These new IDs are primarily intended for type comparison purposes.</li>
<li>Item type IDs are used at <b>runtime only</b>. They should <b>NOT</b> be stored in configs or databases, as they are not guaranteed <a class="el" href="protocolto-p.html">to</a> remain the same between versions.</li>
</ul>
</li>
<li>In some cases, items may have additional "type data" which provides extra type information about an item. This replaces item metadata in some cases.<ul>
<li>Type data may be used <a class="el" href="protocolto-p.html">to</a> store dynamic type information such as dye colour, potion type, etc.</li>
<li>Items must have the same type ID <b>and</b> type data in order <a class="el" href="protocolto-p.html">to</a> be stackable.</li>
</ul>
</li>
<li>Blocks, when represented as items:<ul>
<li>retain their block type data, but not state data (for example, different colours of concrete don't stack, but things like facing don't affect stackability)</li>
<li>use the negative of their block type ID (e.g. a block with type ID <code>1</code> will have an item type ID of <code>-1</code>).</li>
</ul>
</li>
<li>Durable items (e.g. tools, armour) now use NBT <code>Damage</code> tag <a class="el" href="protocolto-p.html">to</a> store durability (like Minecraft 1.13+), instead of legacy meta values.</li>
</ul>
<p><b>Item type IDs and type data are intended for RUNTIME use only. The values of type IDs and/or type data may change without warning. They should NOT be saved in configs or databases.</b></p>
<h4><a class="anchor" id="autotoc_md1355"></a>
Implementing new items</h4>
<p>To register a new item, the following changes are now required:</p>
<ul>
<li>Add a new ID <a class="el" href="protocolto-p.html">to</a> <code>ItemTypeIds</code></li>
<li>Register the item in <code>ItemFactory</code></li>
<li>Amend <code>VanillaItems</code> <a class="el" href="protocolto-p.html">to</a> add the item</li>
<li>Amend <code>ItemDeserializer</code> <a class="el" href="protocolto-p.html">to</a> add a deserializer for loading the item from disk</li>
<li>Amend <code>ItemSerializer</code> <a class="el" href="protocolto-p.html">to</a> add a serializer for saving the item <a class="el" href="protocolto-p.html">to</a> disk</li>
<li>Optionally, amend <code>StringToItemParser</code> <a class="el" href="protocolto-p.html">to</a> add string alias(es) for the item, so it can be given via <code>/give</code></li>
</ul>
<p>Again, it's acknowledged this is rather more cumbersome than it should be, but this is an ongoing process.</p>
<h4><a class="anchor" id="autotoc_md1356"></a>
Change list</h4>
<ul>
<li><code>Item</code> is no longer <code>json_encode()</code>-able.<ul>
<li>The original purpose of this was <a class="el" href="protocolto-p.html">to</a> allow items <a class="el" href="protocolto-p.html">to</a> be serialized <a class="el" href="protocolto-p.html">to</a> JSON for crafting data generated from <code>CraftingDataPacket</code>. Due <a class="el" href="protocolto-p.html">to</a> changes in the generation methodology, bypassing <code>Item</code>s entirely, this is no longer necessary.</li>
<li><code>jsonSerialize()</code> requires the item <a class="el" href="protocolto-p.html">to</a> know about the method by which it will be serialized, creating a cyclic dependency between the <code>Item</code> implementation and its serialization method.</li>
<li>It's relatively easy <a class="el" href="protocolto-p.html">to</a> write a replacement method <a class="el" href="protocolto-p.html">to</a> encode items <a class="el" href="protocolto-p.html">to</a> JSON as you desire.</li>
</ul>
</li>
<li>The following classes have been removed:<ul>
<li><code>ItemIds</code></li>
<li><code>Skull</code></li>
<li><code>Bed</code></li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>CoralFan</code></li>
<li><code>Spyglass</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public Dye-&gt;setColor()</code></li>
<li><code>public ItemIdentifer-&gt;getTypeId()</code></li>
<li><code>public static ItemIdentifier::fromBlock()</code></li>
<li><code>public Potion-&gt;setType()</code></li>
<li><code>public SplashPotion-&gt;setType()</code></li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>Item-&gt;getId()</code> - for type comparisons, use <code>Item-&gt;getTypeId()</code> instead</li>
<li><code>Item-&gt;getMeta()</code> - use the item's specific API methods <a class="el" href="protocolto-p.html">to</a> compare information such as colour, potion type etc.</li>
<li><code>Item-&gt;hasAnyDamageValue()</code> - for meta wildcard recipe ingredients, use <code>pocketmine\crafting\MetaWildcardRecipeIngredient</code> instead</li>
<li><code>ItemFactory-&gt;get()</code><ul>
<li>To get an item at runtime, e.g. iron ingot, use <code>VanillaItems::IRON_INGOT()</code></li>
<li>To get a block as an item, e.g. stone, use <code>VanillaBlocks::STONE()-&gt;asItem()</code></li>
<li>To load an item from legacy ID and meta:<ol type="1">
<li>Use <code>GlobalItemDataHandlers::getUpgrader()-&gt;upgradeItemTypeDataInt()</code> <a class="el" href="protocolto-p.html">to</a> convert the legacy ID and meta <a class="el" href="protocolto-p.html">to</a> <code>ItemStackData</code></li>
<li>Pass the itemstack data <a class="el" href="protocolto-p.html">to</a> <code>GlobalItemDataHandlers::getDeserializer()</code> <a class="el" href="protocolto-p.html">to</a> get an <code>Item</code> instance</li>
</ol>
</li>
</ul>
</li>
<li><code>ItemFactory-&gt;remap()</code></li>
<li><code>ItemIdentifier-&gt;getId()</code></li>
<li><code>ItemIdentifier-&gt;getMeta()</code></li>
</ul>
</li>
<li>The following API methods have been renamed:<ul>
<li><code>Item::jsonDeserialize()</code> -&gt; <code>Item::legacyJsonDeserialize()</code></li>
<li><code>ItemFactory-&gt;getAllRegistered()</code> -&gt; <code>ItemFactory-&gt;getAllKnownTypes()</code></li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>ItemFactory-&gt;isRegistered()</code> no longer accepts a <code>$variant</code> parameter, and now expects an item type ID for the ID parameter</li>
<li><code>ItemIdentifier-&gt;__construct()</code> no longer accepts a <code>$variant</code> parameter, and now expects an item type ID for the ID parameter</li>
<li><code>LegacyStringToItemParser-&gt;addMapping()</code> now accepts a string for ID, instead of an integer</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1357"></a>
&lt;tt&gt;pocketmine\world&lt;/tt&gt;</h3>
<ul>
<li>The following classes have been added:<ul>
<li><code>pocketmine\world\format\io\GlobalBlockStateHandlers</code></li>
<li><code>pocketmine\world\format\io\GlobalItemDataHandlers</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1358"></a>
5.0.0-ALPHA2</h1>
<p>Released 14th July 2022.</p>
<h2><a class="anchor" id="autotoc_md1359"></a>
Core</h2>
<ul>
<li>Reduced memory usage of the server on startup.</li>
<li>Fixed error spam when loading item frames without items in them.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1360"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1361"></a>
Blocks</h3>
<ul>
<li>Added the following new blocks:<ul>
<li>Cakes with Candle &amp; Dyed Candle</li>
<li>Candle &amp; Dyed Candle</li>
<li>Cartography Table (not currently usable due <a class="el" href="protocolto-p.html">to</a> maps not being implemented)</li>
<li>Copper block (random oxidation not yet implemented)</li>
<li>Cut Copper block, stairs and slabs (random oxidation not yet implemented)</li>
<li>Crying Obsidian</li>
<li>Gilded Blackstone</li>
<li>Glow Item Frame</li>
<li>Hanging Roots</li>
<li>Lightning Rod</li>
<li>Netherite Block</li>
<li>Smithing Table</li>
<li>Tinted Glass</li>
<li>Warped Wart Block</li>
<li>Wither Rose</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1362"></a>
Items</h3>
<ul>
<li>Added the following new items:<ul>
<li>Honey Bottle</li>
<li>Netherite Axe</li>
<li>Netherite Boots</li>
<li>Netherite Chestplate</li>
<li>Netherite Helmet</li>
<li>Netherite Ingot</li>
<li>Netherite Leggings</li>
<li>Netherite Pickaxe</li>
<li>Netherite Scrap</li>
<li>Netherite Shovel</li>
<li>Netherite Sword</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1363"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1364"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li>Dependency between <code>BlockFactory</code> and <code>VanillaBlocks</code> has been inverted.<ul>
<li>Now, blocks are defined in <code>VanillaBlocks</code>, and automatically registered in <code>BlockFactory</code>.</li>
<li>Manual registration in <code>BlockFactory</code> is still required for custom blocks.</li>
<li><code>BlockFactory</code> now has only one purpose, which is <a class="el" href="protocolto-p.html">to</a> map internal blockstate IDs <a class="el" href="protocolto-p.html">to</a> <code>Block</code> objects when reading blocks from chunks.</li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>public Block-&gt;isFireProofAsItem()</code></li>
<li><code>public Block-&gt;onProjectileHit()</code></li>
<li><code>public ItemFrame-&gt;isGlowing()</code></li>
<li><code>public ItemFrame-&gt;setGlowing()</code></li>
</ul>
</li>
<li>The following new classes have been added:<ul>
<li><code>BaseCake</code></li>
<li><code>CakeWithCandle</code></li>
<li><code>CakeWithDyedCandle</code></li>
<li><code>Candle</code></li>
<li><code>CartographyTable</code></li>
<li><code>CopperSlab</code></li>
<li><code>CopperStairs</code></li>
<li><code>Copper</code></li>
<li><code>DyedCandle</code></li>
<li><code>GildedBlackstone</code></li>
<li><code>HangingRoots</code></li>
<li><code>LightningRod</code></li>
<li><code>SmithingTable</code></li>
<li><code>WitherRose</code></li>
<li><code>utils\CandleTrait</code></li>
<li><code>utils\CopperOxidation</code></li>
<li><code>utils\CopperTrait</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1365"></a>
&lt;tt&gt;pocketmine\crafting&lt;/tt&gt;</h3>
<ul>
<li>JSON models have been updated <a class="el" href="protocolto-p.html">to</a> reflect updated crafting data format.</li>
<li>The following enum classes have new members:<ul>
<li><code>ShapelessRecipeType</code> has new members <code>CARTOGRAPHY</code> and <code>SMITHING</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1366"></a>
&lt;tt&gt;pocketmine\data&lt;/tt&gt;</h3>
<ul>
<li><code>LegacyToStringBidirectionalIdMap</code> has been reduced <a class="el" href="protocolto-p.html">to</a> <code>LegacyToStringIdMap</code>.<ul>
<li>Since we never map from string ID <a class="el" href="protocolto-p.html">to</a> legacy ID, bidirectional mapping is no longer necessary.</li>
<li>This affects the following subclasses:<ul>
<li><code>LegacyBiomeIdToStringIdMap</code></li>
<li><code>LegacyBlockIdToStringIdMap</code></li>
<li><code>LegacyEntityIdToStringIdMap</code></li>
<li><code>LegacyItemIdToStringIdMap</code></li>
</ul>
</li>
</ul>
</li>
<li>The following internal API methods have been added:<ul>
<li><code>public LegacyToStringIdMap-&gt;add(string $string, int $legacy) : void</code> - adds a mapping from a custom legacy ID <a class="el" href="protocolto-p.html">to</a> custom string ID, needed for upgrading old saved data</li>
<li><code>public LegacyBlockStateMapper-&gt;addMapping(string $stringId, int $intId, int $meta, BlockStateData $stateData) : void</code> - adds a mapping from legacy block data <a class="el" href="protocolto-p.html">to</a> a modern blockstate, needed for upgrading old saved data</li>
<li><code>public BlockStateData-&gt;getState(string $name) : ?Tag</code></li>
</ul>
</li>
<li>The following internal API methods have signature changes:<ul>
<li><code>BlockStateData-&gt;__construct()</code> now accepts <code>array&lt;string, Tag</code>&gt; for <code>$states</code> instead of <code>CompoundTag</code></li>
<li><code>BlockStateData-&gt;getStates()</code> now returns <code>array&lt;string, Tag&gt;</code> instead of <code>CompoundTag</code> (allows reducing memory usage)</li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>UnsupportedItemTypeException</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1367"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<ul>
<li><code>ItemFactory</code> has been removed.<ul>
<li>Vanilla item registration is now done via <code>VanillaItems</code>.</li>
<li>The procedure for registering a custom item is the same as in ALPHA1, minus the <code>ItemFactory</code> step.</li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public ArmorTypeInfo-&gt;getToughness() : int</code></li>
<li><code>public ArmorTypeInfo-&gt;isFireProof() : bool</code></li>
<li><code>public Item-&gt;isFireProof() : bool</code></li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>ArmorTypeInfo-&gt;__construct()</code> now accepts optional parameters <code>int $toughness</code> and <code>bool $fireProof</code></li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>HoneyBottle</code></li>
</ul>
</li>
<li>The following enums have new members:<ul>
<li><code>ToolTier</code> has new member <code>NETHERITE</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1368"></a>
&lt;tt&gt;pocketmine\world&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have signature changes:<ul>
<li><code>SubChunk-&gt;__construct()</code> parameter <code>$blocks</code> has been renamed <a class="el" href="protocolto-p.html">to</a> <code>$blockLayers</code>.</li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>CopperWaxApplySound</code></li>
<li><code>CopperWaxRemoveSound</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1369"></a>
5.0.0-ALPHA3</h1>
<p>Released 14th August 2022.</p>
<h2><a class="anchor" id="autotoc_md1370"></a>
Core</h2>
<ul>
<li>Support for Bedrock 1.19.20.</li>
<li>Dropped support for Bedrock versions older than 1.19.20.</li>
<li>Improved performance of dropping block inventory contents when the block is destroyed.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1371"></a>
Fixes</h2>
<ul>
<li>Fixed errors when loading air itemstacks from PM4 worlds. These weren't supposed <a class="el" href="protocolto-p.html">to</a> exist (vanilla doesn't save them), but they were present in older PM worlds due <a class="el" href="protocolto-p.html">to</a> a bug in older versions.</li>
<li>Fixed server crash when discovering unknown blocks in non-leveldb worlds during conversion.</li>
<li>Fixed crimson / warped planks being usable as furnace fuel.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1372"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1373"></a>
Blocks</h3>
<ul>
<li>Added the following new blocks:<ul>
<li>Cauldron</li>
<li>Chorus Flower</li>
<li>Chorus Plant</li>
<li>Froglight (pearlescent, verdant, ochre)</li>
<li>Mangrove Roots</li>
<li>Muddy Mangrove Roots</li>
<li>Rooted Dirt</li>
<li>Spore Blossom</li>
</ul>
</li>
<li>Fixed lava setting entities on fire for an incorrect duration (Java vs Bedrock inconsistency).</li>
</ul>
<h3><a class="anchor" id="autotoc_md1374"></a>
Items</h3>
<ul>
<li>Glass bottles can now be filled with water by clicking on a water source block.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1375"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1376"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<h4><a class="anchor" id="autotoc_md1377"></a>
Highlights</h4>
<ul>
<li>Introduced "type tags" concept, which allows marking certain blocks as having certain behaviours.<ul>
<li>The idea for this system was borrowed from the Minecraft Java tags system.</li>
<li>It's still in very early concept stage, but is currently used for deciding which types of blocks plants can be placed on without needing <a class="el" href="protocolto-p.html">to</a> enumerate every single ID in every class, eliminating a bunch of boilerplate code and improving consistency.</li>
</ul>
</li>
<li>All <code>Block</code> descendents now accept <code>BlockTypeInfo</code> in the constructor, instead of <code>BlockBreakInfo</code>.<ul>
<li>This allows for future additions without needing <a class="el" href="protocolto-p.html">to</a> change dozens of overridden constructors.</li>
</ul>
</li>
<li>Dynamic type and state property serialization now each use a single, unified method (<code>describeType</code> and <code>describeState</code> respectively) which accept <code>RuntimeDataReader|RuntimeDataWriter</code>, instead of separate decode/encode methods.<ul>
<li>This simplifies implementing new blocks and avoids duplication of information.</li>
</ul>
</li>
<li><code>&amp;$returnedItems</code> reference parameter is now used in some places <a class="el" href="protocolto-p.html">to</a> enable actions <a class="el" href="protocolto-p.html">to</a> return items <a class="el" href="protocolto-p.html">to</a> players without caring about whether they are in creative or anything else.<ul>
<li>This eliminates boilerplate code of deciding whether <a class="el" href="protocolto-p.html">to</a> set the player's held item or not, as well as automatically dropping any overflow items that don't fit into the inventory.</li>
<li>This is currently used when filling/emptying cauldrons using buckets or glass bottles.</li>
</ul>
</li>
<li><code>BlockTypeIds</code> now exposes <code>newId()</code> static method <a class="el" href="protocolto-p.html">to</a> ease addition of custom blocks.</li>
</ul>
<h4><a class="anchor" id="autotoc_md1378"></a>
Changes</h4>
<ul>
<li>The following API methods have signature changes:<ul>
<li><code>Block-&gt;onInteract()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Block-&gt;onBreak()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Block-&gt;readStateFromWorld()</code> now returns <code>Block</code>.<ul>
<li>This allows blocks <a class="el" href="protocolto-p.html">to</a> replace themselves with a different block entirely based on world conditions.</li>
</ul>
</li>
</ul>
</li>
<li>The following new classes have been added:<ul>
<li><code>BlockTypeInfo</code></li>
<li><code>BlockTypeTags</code></li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>protected Block-&gt;describeState(RuntimeDataReader|RuntimeDataWriter $w) : void</code> - describes <a class="el" href="protocolto-p.html">to</a> a runtime data reader/writer how <a class="el" href="protocolto-p.html">to</a> read/write the block's state properties</li>
<li><code>protected Block-&gt;describeType(RuntimeDataReader|RuntimeDataWriter $w) : void</code> - describes <a class="el" href="protocolto-p.html">to</a> a runtime data reader/writer how <a class="el" href="protocolto-p.html">to</a> read/write the block's dynamic type properties</li>
<li><code>public Block-&gt;getTypeTags() : array&lt;string&gt;</code></li>
<li><code>public Block-&gt;hasTypeTag(string $tag) : bool</code></li>
<li><code>public Spawnable-&gt;getRenderUpdateBugWorkaroundStateProperties(Block $block) : array&lt;string, Tag&gt;</code> - allows spawnable tiles <a class="el" href="protocolto-p.html">to</a> spoof block state properties <a class="el" href="protocolto-p.html">to</a> work around client-side rendering bugs without actually changing the block server-side</li>
<li><code>public static BlockBreakInfo::axe(float $hardness, ?ToolTier $toolTier = null, ?float $blastResistance = null) : BlockBreakInfo</code></li>
<li><code>public static BlockBreakInfo::pickaxe(float $hardness, ?ToolTier $toolTier = null, ?float $blastResistance = null) : BlockBreakInfo</code></li>
<li><code>public static BlockBreakInfo::shovel(float $hardness, ?ToolTier $toolTier = null, ?float $blastResistance = null) : BlockBreakInfo</code></li>
<li><code>public static BlockBreakInfo::tier(float $hardness, int $toolType, ToolTier $toolTier, ?float $blastResistance = null) : BlockBreakInfo</code></li>
<li><code>public static BlockTypeIds::newId() : int</code> - returns a new dynamic block type ID for use by custom blocks</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1379"></a>
&lt;tt&gt;pocketmine\data&lt;/tt&gt;</h3>
<ul>
<li>The following classes have been renamed:<ul>
<li><code>LegacyBlockStateMapper</code> -&gt; <code>BlockIdMetaUpgrader</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public BlockDataUpgrader-&gt;getIdMetaUpgrader() : BlockIdMetaUpgrader</code></li>
<li><code>public BlockIdMetaUpgrader-&gt;addIdMetaToStateMapping(string $stringId, int $meta, BlockStateData $stateData) : void</code></li>
<li><code>public BlockIdMetaUpgrader-&gt;addIntIdToStringIdMapping(int $intId, string $stringId) : void</code></li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>BlockIdMetaUpgrader-&gt;addMapping()</code> - use <code>addIdMetaToStateMapping()</code> (and <code>addIntIdToStringIdMapping()</code> if necessary) instead</li>
</ul>
</li>
<li><code>LegacyToStringMap</code> no longer throws exceptions when adding the same mapping twice if the addition would have no effect.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1380"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<h4><a class="anchor" id="autotoc_md1381"></a>
Highlights</h4>
<ul>
<li><code>&amp;$returnedItems</code> reference parameter is now used in some places <a class="el" href="protocolto-p.html">to</a> enable actions <a class="el" href="protocolto-p.html">to</a> return items <a class="el" href="protocolto-p.html">to</a> players without caring about whether they are in creative or anything else.<ul>
<li>This eliminates boilerplate code of deciding whether <a class="el" href="protocolto-p.html">to</a> set the player's held item or not, as well as automatically dropping any overflow items that don't fit into the inventory.</li>
<li>This is used for things like filling/emptying buckets and bottles, and equipping armor.</li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md1382"></a>
Changes</h4>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public Armor-&gt;clearCustomColor() : $this</code> - clears the custom color of an armor item</li>
<li><code>public static ItemTypeIds::newId() : int</code> - returns a new dynamic item type ID for use by custom items</li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>Item-&gt;onAttackEntity()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Item-&gt;onClickAir()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Item-&gt;onDestroyBlock()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Item-&gt;onInteractBlock()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
<li><code>Item-&gt;onReleaseUsing()</code> now accepts <code>array&lt;Item&gt; &amp;$returnedItems</code> reference parameter.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1383"></a>
5.0.0-ALPHA4</h1>
<p>Released 24th September 2022.</p>
<h2><a class="anchor" id="autotoc_md1384"></a>
Core</h2>
<ul>
<li>Now targeting Minecraft: Bedrock 1.19.30.</li>
<li>All tests and static analysis are now being run on PHP 8.1 as well as PHP 8.0.</li>
<li>Silenced warning about Xdebug when it's loaded but disabled by <code>xdebug.mode</code> configuration.</li>
<li>A new <code>console.enable-input</code> option has been added <a class="el" href="protocolto-p.html">to</a> <code>pocketmine.yml</code>, which allows disabling the console reader in environments where it's not needed (e.g. a Docker container). This can be useful <a class="el" href="protocolto-p.html">to</a> save processor and memory resources.</li>
<li>Console reader polling is now done on the main thread. Since the console reader communication is now done via sockets, there's no longer any reason for it <a class="el" href="protocolto-p.html">to</a> have its own thread.</li>
<li>Crashdumps now include JIT mode information for use by the Crash Archive.</li>
<li>Improved handling of "UI" inventories in network <code>InventoryManager</code>. Their contents are now synced correctly.</li>
<li>Fixed cartography table recipes pretending <a class="el" href="protocolto-p.html">to</a> be smithing table recipes in <code>CraftingDataPacket</code>.</li>
<li>Fixed incorrect key being used for saving entity type IDs in save data.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1385"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1386"></a>
General</h3>
<ul>
<li>Plugin dependents are now always disabled before their dependencies on shutdown, <a class="el" href="protocolto-p.html">to</a> ensure that the dependents can finish what they are doing correctly.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1387"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public SignText-&gt;isGlowing() : bool</code></li>
<li><code>public SignText-&gt;getBaseColor() : pocketmine\color\Color</code></li>
</ul>
</li>
<li>The following API methods have signature changes:<ul>
<li><code>SignText::fromBlob()</code> now accepts two new optional parameters: <code>?Color $baseColor</code> and <code>bool $glowing</code></li>
<li><code>SignText::__construct()</code> now accepts two new optional parameters: <code>?Color $baseColor</code> and <code>bool $glowing</code></li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>TreeType::fromMagicNumber()</code></li>
<li><code>TreeType-&gt;getMagicNumber()</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1388"></a>
&lt;tt&gt;pocketmine\command&lt;/tt&gt;</h3>
<ul>
<li>Command permissions are now always checked by the server when running a command.<ul>
<li>This only affects commands implemented by extending <code>Command</code>. Plugins using <code>PluginBase-&gt;onCommand()</code> are not affected by this change, since they already had permissions checked by the server anyway.</li>
<li>Previously, direct inheritors of <code>Command</code> were responsible for checking permissions, which required developers <a class="el" href="protocolto-p.html">to</a> duplicate the same code in every command, and opened lots of potential for security vulnerabilities.</li>
<li>If you want <a class="el" href="protocolto-p.html">to</a> do something on permission denied (e.g. sending a special message, or audit logging), you can do so by overriding <code>Command-&gt;testPermission()</code>, instead of baking the code directly into <code>Command-&gt;execute()</code>.</li>
<li>If you don't want <a class="el" href="protocolto-p.html">to</a> use permissions at all, just create a permission with a default of <code>true</code> (or belonging <a class="el" href="protocolto-p.html">to</a> <code>pocketmine.group.user</code>) and assign that.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1389"></a>
&lt;tt&gt;pocketmine\data&lt;/tt&gt;</h3>
<h4><a class="anchor" id="autotoc_md1390"></a>
Highlights</h4>
<ul>
<li>Introduced an experimental, mostly unified item (de)serializer registrar, <code>ItemSerializerDeserializerRegistrar</code>.<ul>
<li>This class includes helper methods <a class="el" href="protocolto-p.html">to</a> register symmetric serializer and deserializer callbacks into an <code>ItemSerializer</code> and <code>ItemDeserializer</code>.</li>
<li>This halves the amount of code needed <a class="el" href="protocolto-p.html">to</a> register new items in the vast majority of cases.</li>
<li>This is currently used <a class="el" href="protocolto-p.html">to</a> register all currently implemented items.</li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md1391"></a>
Other changes</h4>
<ul>
<li>The following classes have been renamed:<ul>
<li><code>BlockObjectToBlockStateSerializer</code> -&gt; <code>BlockObjectToStateSerializer</code></li>
<li><code>BlockStateToBlockObjectDeserializer</code> -&gt; <code>BlockStateToObjectDeserializer</code></li>
</ul>
</li>
<li>The following classes have been removed:<ul>
<li><code>CachingBlockStateDeserializer</code></li>
<li><code>CachingBlockStateSerializer</code></li>
<li><code>DelegatingBlockStateDeserializer</code></li>
<li><code>DelegatingBlockStateSerializer</code></li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>public BlockStateToObjectDeserializer-&gt;mapSimple(string $stringId, \Closure() : Block $getBlock) : void</code> - for symmetry with the serializer</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1392"></a>
&lt;tt&gt;pocketmine\event&lt;/tt&gt;</h3>
<ul>
<li><code>BlockFormEvent</code> now includes information about the block which caused the event.<ul>
<li>Added <code>public BlockFormEvent-&gt;getCausingBlock() : Block</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1393"></a>
&lt;tt&gt;pocketmine\inventory&lt;/tt&gt;</h3>
<ul>
<li>Introduced a new <code>TransactionBuilder</code> class, which considerably simplifies the process of constructing an <code>InventoryTransaction</code> from generic <code>setItem()</code> calls.<ul>
<li>This is currently used <a class="el" href="protocolto-p.html">to</a> build server-side transactions for evicting the contents of the crafting grid when closing the main inventory.</li>
<li>This is planned for use with the new Minecraft Bedrock item stack request system.</li>
</ul>
</li>
<li>Improved PHPStan type information available for <code>Inventory</code> and <code>BaseInventory</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1394"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been changed:<ul>
<li><code>Item-&gt;encodeType(RuntimeDataWriter $w) : void</code> -&gt; <code>Item-&gt;describeType(RuntimeDataReader|RuntimeDataWriter $w) : void</code></li>
</ul>
</li>
<li>The following new classes have been added:<ul>
<li><code>SuspiciousStew</code></li>
<li><code>SuspiciousStewType</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1395"></a>
&lt;tt&gt;pocketmine\utils&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public static Utils::getOpcacheJitMode() : int</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1396"></a>
&lt;tt&gt;pocketmine\world&lt;/tt&gt;</h3>
<ul>
<li>The following new classes have been added:<ul>
<li><code>sound\DyeUseSound</code></li>
<li><code>sound\InkSacUseSound</code></li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>GlobalBlockStateHandlers::getSerializer()</code> now returns <code>BlockObjectToStateSerializer</code> directly instead of <code>BlockStateSerializer</code>.</li>
<li><code>GlobalBlockStateHandlers::getDeserializer()</code> now returns <code>BlockStateToObjectDeserializer</code> directly instead of <code>BlockStateDeserializer</code>.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1397"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1398"></a>
General</h3>
<ul>
<li>Spectator players are no longer able <a class="el" href="protocolto-p.html">to</a> acquire blocks by block picking that they don't already have in their inventories. The behaviour is now the same as survival mode.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1399"></a>
Blocks</h3>
<ul>
<li>Coral and coral fans now behave correctly when placed out of water (they no longer immediately die).</li>
<li>Added support for dyeing sign text and making it glow.</li>
<li>Fixed dead bush being able <a class="el" href="protocolto-p.html">to</a> be placed on some invalid blocks (e.g. stone).</li>
<li>TNT can now be ignited by fire charges.</li>
<li>Vines can now only be placed on the side of full-cube blocks.</li>
<li>Fixed sugarcane not being able <a class="el" href="protocolto-p.html">to</a> be placed on some blocks.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1400"></a>
Items</h3>
<ul>
<li>Added the following new items:<ul>
<li>Fire Charge</li>
<li>Suspicious Stew</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1401"></a>
Effects</h3>
<ul>
<li>Updated damage modifier amounts for Instant Damage <a class="el" href="protocolto-p.html">to</a> be more in line with vanilla.</li>
<li>Updated duration modifier amounts for Regeneration <a class="el" href="protocolto-p.html">to</a> be more like vanilla.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1402"></a>
5.0.0-ALPHA5</h1>
<p>Released 13th November 2022.</p>
<p><b>This release includes changes from <a href="https://github.com/pmmp/PocketMine-MP/releases/4.11.0-BETA2">4.11.0-BETA2</a> and earlier, which may not be listed here.</b></p>
<h2><a class="anchor" id="autotoc_md1403"></a>
General</h2>
<ul>
<li>Added support for Minecraft: Bedrock 1.19.40.</li>
<li>Removed support for earlier versions.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1404"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1405"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li><code>FallableTrait</code> now includes a default implementation of <code>tickFalling()</code>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1406"></a>
&lt;tt&gt;pocketmine\event&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been removed:<ul>
<li><code>PlayerCommandPreprocessEvent</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public DataPacketSendEvent-&gt;setPackets(list&lt;ClientboundPacket&gt; $packets) : void</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1407"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1408"></a>
General</h3>
<ul>
<li>Fixed dyeing leather armour in cauldrons.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1409"></a>
Blocks</h3>
<ul>
<li>Copper blocks now play the correct scrape sound when using an axe on them.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1410"></a>
Internals</h2>
<ul>
<li>Moved command timings <a class="el" href="protocolto-p.html">to</a> <code>Timings</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1411"></a>
5.0.0-ALPHA6</h1>
<p>Released 19th December 2022.</p>
<p><b>This release includes changes from the following releases, which may not be mentioned:</b></p><ul>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.10.2">4.10.2</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.11.0">4.11.0</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.0">4.12.0</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.1">4.12.1</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.2">4.12.2</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md1412"></a>
General</h2>
<ul>
<li>Fixed the Bedrock client asking <a class="el" href="protocolto-p.html">to</a> upgrade worlds exported from PocketMine-MP <a class="el" href="protocolto-p.html">to</a> Bedrock (missing level.dat fields).</li>
<li>Added support for 1.19.40 and newer Bedrock worlds.</li>
<li>Commands are now enabled by default in worlds exported from PocketMine-MP <a class="el" href="protocolto-p.html">to</a> Bedrock.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1413"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1414"></a>
Blocks</h3>
<ul>
<li>Added the following new blocks:<ul>
<li>Twisting Vines</li>
<li>Weeping Vines</li>
</ul>
</li>
<li>Anvils are now damaged when they hit the ground after falling.</li>
<li>Added missing sounds for anvils hitting the ground after falling.</li>
<li>Fixed missing sounds when a projectile strikes an amethyst block.</li>
<li>Fixed some blocks being incorrectly able <a class="el" href="protocolto-p.html">to</a> be placed on top of a candle cake.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1415"></a>
Items</h3>
<ul>
<li>Added the following new items:<ul>
<li>Music Disc (5)</li>
<li>Music Disc (Otherside)</li>
<li>Music Disc (Pigstep)</li>
</ul>
</li>
<li>Implemented Swift Sneak enchantment.</li>
<li>Armour durability is now only reduced when the wearer receives a type of damage that the armour can protect against.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1416"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1417"></a>
General</h3>
<ul>
<li>Union and mixed native parameter, return and property types are now used where appropriate.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1418"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public Furnace-&gt;getType() : utils\FurnaceType</code></li>
</ul>
</li>
<li>The following interfaces have new requirements:<ul>
<li><code>utils\Fallable</code> now requires <code>onHitGround()</code> <a class="el" href="protocolto-p.html">to</a> be implemented (although filled by default implementation in <code>FallableTrait</code>).</li>
<li><code>utils\Fallable</code> now requires <code>getLandSound()</code> <a class="el" href="protocolto-p.html">to</a> be implemented (although filled by default implementation in <code>FallableTrait</code>).</li>
</ul>
</li>
<li>The following new API constants have been added:<ul>
<li><code>public BlockTypeTags::FIRE</code> - used by fire and soul fire</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1419"></a>
&lt;tt&gt;pocketmine\crafting&lt;/tt&gt;</h3>
<ul>
<li>The <code>$type</code> parameter of <code>ShapelessRecipe-&gt;__construct()</code> is now mandatory.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1420"></a>
&lt;tt&gt;pocketmine\entity&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public Living-&gt;getDisplayName() : string</code></li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>EntityFactory-&gt;register()</code> no longer accepts a <code>$legacyMcpeSaveId</code> parameter (now handled by internal conversions instead).</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1421"></a>
&lt;tt&gt;pocketmine\event&lt;/tt&gt;</h3>
<ul>
<li>The following classes have been renamed:<ul>
<li><code>entity\ExplosionPrimeEvent</code> -&gt; <code>entity\EntityPreExplodeEvent</code></li>
</ul>
</li>
<li>The following new classes have been added:<ul>
<li><code>world\WorldParticleEvent</code> - called when a particle is spawned in a world</li>
<li><code>world\WorldSoundEvent</code> - called when a sound is played in a world</li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>entity\EntityPreExplodeEvent-&gt;__construct()</code> has the <code>$force</code> parameter renamed <a class="el" href="protocolto-p.html">to</a> <code>$radius</code></li>
<li><code>entity\EntityPreExplodeEvent-&gt;getForce() : float</code> -&gt; <code>entity\EntityPreExplodeEvent-&gt;getRadius() : float</code></li>
<li><code>entity\EntityPreExplodeEvent-&gt;setForce(float $force) : void</code> -&gt; <code>entity\EntityPreExplodeEvent-&gt;setRadius(float $radius) : void</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1422"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public Item-&gt;keepOnDeath() : bool</code> - returns whether this item will be retained when a player carrying it dies</li>
<li><code>public Item-&gt;onInteractEntity(Player $player, Entity $entity, Vector3 $clickPos) : bool</code> - called when a player interacts with an entity with this item in their hand</li>
<li><code>public Item-&gt;setKeepOnDeath(bool $keepOnDeath) : void</code> - sets whether this item will be retained when a player carrying it dies</li>
<li><code>public StringToItemParser-&gt;lookupAliases(Item $item) : list&lt;string&gt;</code> - returns a list of all registered aliases for the given item</li>
<li><code>public StringToItemParser-&gt;lookupBlockAliases(Block $block) : list&lt;string&gt;</code> - returns a list of all registered aliases for the given block</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1423"></a>
&lt;tt&gt;pocketmine\resourcepacks&lt;/tt&gt;</h3>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public ResourcePackManager-&gt;setPackEncryptionKey(string $id, ?string $key) : void</code> - sets the encryption key <a class="el" href="protocolto-p.html">to</a> be used for the resource pack identified by the given UUID</li>
<li><code>public ResourcePackManager-&gt;setResourceStack(list&lt;ResourcePack&gt; $resourceStack) : void</code> - sets the resource stack <a class="el" href="protocolto-p.html">to</a> be used by the server</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1424"></a>
&lt;tt&gt;pocketmine\world&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>Explosion-&gt;__construct()</code> has the <code>$size</code> parameter renamed <a class="el" href="protocolto-p.html">to</a> <code>$radius</code></li>
</ul>
</li>
<li>The following public properties have been renamed:<ul>
<li><code>Explosion-&gt;size</code> -&gt; <code>Explosion-&gt;radius</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1425"></a>
Internals</h2>
<ul>
<li><code>EntityLegacyIds</code> has been removed. Legacy entity IDs found during world loading are now converted via <code>LegacyEntityIdToStringIdMap</code>.</li>
<li>All usages of NBT keys now use class constants instead of hardcoded strings (except for an occasional overlooked one).</li>
<li>All members of <code>BlockTypeTags</code> now have a <code>pocketmine:</code> prefix on the value. This does not affect constant usages.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1426"></a>
5.0.0-ALPHA7</h1>
<p>Released 18th January 2023.</p>
<p><b>This release includes changes from the following releases, which may not be mentioned:</b></p><ul>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.3">4.12.3</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.4">4.12.4</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.5">4.12.5</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.6">4.12.6</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.7">4.12.7</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.8">4.12.8</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.9">4.12.9</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.12.10">4.12.10</a></li>
<li><a href="https://github.com/pmmp/PocketMine-MP/releases/tag/4.13.0-BETA1">4.13.0-BETA1</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md1427"></a>
Fixes</h2>
<ul>
<li>Fixed glowing item frame placement creating the wrong tile, causing invisible items.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1428"></a>
Localization</h2>
<ul>
<li>Localized disconnect messages are now used in the following cases:<ul>
<li>Server full</li>
<li>Player not on the server whitelist</li>
<li>Player on the server ban list</li>
<li>Invalid skin</li>
<li>Invalid username</li>
<li>Kicked using <code>/kick</code></li>
<li>Banned using <code>/ban</code></li>
<li>Failure <a class="el" href="protocolto-p.html">to</a> find a safe spawn position</li>
</ul>
</li>
<li>Session open, session close and session player name discovery messages are now localized.</li>
<li>All permissions now have localized descriptions. These are not currently used by PocketMine-MP, but may be useful for plugins.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1429"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1430"></a>
Worlds</h3>
<ul>
<li>Added support for 3D biomes. This isn't used by PocketMine-MP yet, but is necessary <a class="el" href="protocolto-p.html">to</a> be able <a class="el" href="protocolto-p.html">to</a> fully load 1.18 worlds.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1431"></a>
Blocks</h3>
<ul>
<li>Added the following new blocks:<ul>
<li>Chain</li>
<li>Sculk</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1432"></a>
Items</h3>
<ul>
<li>Added the following new items:<ul>
<li>Eye Drops (from Education Edition)</li>
<li>Antidote (from Education Edition)</li>
<li>Elixir (from Education Edition)</li>
<li>Tonic (from Education Edition)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1433"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1434"></a>
Overview</h3>
<ul>
<li>Biome-related APIs have changed <a class="el" href="protocolto-p.html">to</a> accommodate 3D biomes.</li>
<li>Disconnect-related APIs have changed <a class="el" href="protocolto-p.html">to</a> accommodate localized disconnect messages.</li>
<li>New, more powerful chat formatting API introduced <a class="el" href="protocolto-p.html">to</a> <code>PlayerChatEvent</code>.</li>
<li>Glowing item frames moved <a class="el" href="protocolto-p.html">to</a> a separate block type instead of being a property of regular item frames (due <a class="el" href="protocolto-p.html">to</a> technical limitations).</li>
</ul>
<h3><a class="anchor" id="autotoc_md1435"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been removed:<ul>
<li><code>ItemFrame-&gt;isGlowing() : bool</code></li>
<li><code>ItemFrame-&gt;setGlowing(bool $glowing) : void</code></li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>public static VanillaBlocks::GLOWING_ITEM_FRAME() : ItemFrame</code></li>
</ul>
</li>
<li>The following constants have been added:<ul>
<li><code>BlockTypeIds::GLOWING_ITEM_FRAME</code></li>
<li><code>BlockTypeIds::CHAIN</code></li>
<li><code>BlockTypeIds::SCULK</code></li>
</ul>
</li>
<li>The following new classes have been added:<ul>
<li><code>Chain</code></li>
<li><code>Sculk</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1436"></a>
&lt;tt&gt;pocketmine\event\player&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>PlayerDuplicateLoginEvent-&gt;getDisconnectMessage()</code> now returns <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerDuplicateLoginEvent-&gt;setDisconnectMessage()</code> now accepts <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerKickEvent-&gt;getReason()</code> now returns <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerKickEvent-&gt;setReason()</code> now accepts <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerLoginEvent-&gt;getKickMessage()</code> now returns <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerLoginEvent-&gt;setKickMessage()</code> now accepts <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerPreLoginEvent-&gt;getFinalKickMessage()</code> now returns <code>Translatable|string</code> instead of <code>string</code></li>
<li><code>PlayerPreLoginEvent-&gt;getKickMessage()</code> now returns <code>Translatable|string|null</code> instead of <code>string|null</code></li>
<li><code>PlayerPreLoginEvent-&gt;setKickReason()</code> now accepts <code>Translatable|string</code> for the <code>$message</code> parameter instead of <code>string</code></li>
<li><code>PlayerQuitEvent-&gt;getQuitReason()</code> now returns <code>Translatable|string</code> instead of <code>string</code></li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>PlayerChatEvent-&gt;getFormat()</code> (use <code>PlayerChatEvent-&gt;getChatFormatter()</code> instead)</li>
<li><code>PlayerChatEvent-&gt;setFormat()</code> (use <code>PlayerChatEvent-&gt;setChatFormatter()</code> instead)</li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>public PlayerChatEvent-&gt;setChatFormatter(\pocketmine\player\chat\ChatFormatter $formatter) : void</code> - sets the chat formatter <a class="el" href="protocolto-p.html">to</a> be used for this event</li>
<li><code>public PlayerChatEvent-&gt;getChatFormatter() : \pocketmine\player\chat\ChatFormatter</code> - returns the chat formatter <a class="el" href="protocolto-p.html">to</a> be used for this event</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1437"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<ul>
<li>The following new classes have been added:<ul>
<li><code>Medicine</code></li>
<li><code>MedicineType</code></li>
</ul>
</li>
<li>The following new class constants have been added:<ul>
<li><code>ItemTypeIds::MEDICINE</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1438"></a>
&lt;tt&gt;pocketmine\network\query&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>QueryInfo-&gt;getPlayerList()</code> now returns <code>list&lt;string&gt;</code> instead of <code>list&lt;Player&gt;</code></li>
<li><code>QueryInfo-&gt;setPlayerList()</code> now accepts <code>list&lt;string&gt;</code> instead of <code>list&lt;Player&gt;</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1439"></a>
&lt;tt&gt;pocketmine\player&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>Player-&gt;kick()</code> now accepts <code>Translatable|string</code> for <code>$reason</code> instead of <code>string</code> (<a class="el" href="protocolto-p.html">to</a> allow localized kick messages)</li>
<li><code>Player-&gt;disconnect()</code> now accepts <code>Translatable|string</code> for <code>$reason</code> instead of <code>string</code> (<a class="el" href="protocolto-p.html">to</a> allow localized disconnect messages)</li>
<li><code>Player-&gt;sendJukeboxPopup()</code> now accepts <code>Translatable|string</code> instead of <code>string, string[]</code></li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md1440"></a>
&lt;tt&gt;pocketmine\player\chat&lt;/tt&gt;</h4>
<ul>
<li>The following new classes have been added:<ul>
<li><code>ChatFormatter</code> - interface implemented by chat formatters</li>
<li><code>StandardChatFormatter</code> - formats chat messages in the vanilla Minecraft style</li>
<li><code>LegacyRawChatFormatter</code> - implements the same behaviour previously used by <code>PlayerChatEvent-&gt;setFormat()</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1441"></a>
&lt;tt&gt;pocketmine\world&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>World-&gt;getBiome()</code> now accepts <code>int $x, int $y, int $z</code> instead of <code>int $x, int $z</code></li>
<li><code>World-&gt;getBiomeId()</code> now accepts <code>int $x, int $y, int $z</code> instead of <code>int $x, int $z</code></li>
<li><code>World-&gt;setBiomeId()</code> now accepts <code>int $x, int $y, int $z</code> instead of <code>int $x, int $z</code></li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md1442"></a>
&lt;tt&gt;pocketmine\world\format&lt;/tt&gt;</h4>
<ul>
<li>The following new API methods have been added:<ul>
<li><code>public SubChunk-&gt;getBiomeArray() : PalettedBlockArray</code></li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>Chunk-&gt;getBiomeId()</code> now accepts <code>int $x, int $y, int $z</code> instead of <code>int $x, int $z</code></li>
<li><code>Chunk-&gt;setBiomeId()</code> now accepts <code>int $x, int $y, int $z</code> instead of <code>int $x, int $z</code></li>
<li><code>Chunk-&gt;__construct()</code> no longer accepts <code>BiomeArray</code> as a parameter (contained in each subchunk instead)</li>
<li><code>SubChunk-&gt;__construct()</code> now accepts <code>int $emptyBlockId, list&lt;PalettedBlockArray&gt; $blocks, PalettedBlockArray $biomes, ?LightArray $blockLight, ?LightArray $skyLight</code> instead of <code>int, list&lt;PalettedBlockArray&gt;, ?LightArray, ?LightArray</code></li>
</ul>
</li>
<li>The following classes have been removed<ul>
<li><code>BiomeArray</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1443"></a>
Internals</h2>
<ul>
<li>Built-in commands now declare their names inside the class constructor, rather than accepting them as parameters. This improves code consistency.</li>
<li><code>NetworkSession</code> disconnect APIs now accept <code>Translatable|string</code> instead of <code>string</code> <a class="el" href="protocolto-p.html">to</a> allow localized disconnect messages.</li>
<li>All external usages of <code>KnownTranslationKeys</code> are now removed. All localized messages are now sent using <code>Translatable</code> objects (usually from <code>KnownTranslationFactory</code>).</li>
</ul>
<h1><a class="anchor" id="autotoc_md1444"></a>
5.0.0-ALPHA8</h1>
<p>Released 23rd January 2023.</p>
<h2><a class="anchor" id="autotoc_md1445"></a>
Core</h2>
<ul>
<li>Updated <code>ext-pthreads</code> requirement <a class="el" href="protocolto-p.html">to</a> <code>^5.1.0</code>. This version improves performance, memory usage, includes BC-breaking API changes, and removes a lot of confusing behaviour.<ul>
<li>See <a href="https://github.com/pmmp/pthreads/releases/tag/5.0.0"><code>ext-pthreads</code> 5.0.0 release</a> for more information.</li>
<li>For the most part, plugins will be unaffected, unless using <code>Threaded</code> objects directly, or directly interacting with other pthreads APIs.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1446"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1447"></a>
Overview</h3>
<ul>
<li>It's now possible <a class="el" href="protocolto-p.html">to</a> specify a different disconnect reason and disconnection screen message. This is useful if you want <a class="el" href="protocolto-p.html">to</a> display a fancy disconnect screen, but don't want <a class="el" href="protocolto-p.html">to</a> spam the server log with useless information.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1448"></a>
&lt;tt&gt;pocketmine\event\player&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been removed:<ul>
<li><code>PlayerKickEvent-&gt;getReason()</code> - replaced by <code>getDisconnectReason()</code> and <code>getDisconnectScreenMessage()</code></li>
<li><code>PlayerKickEvent-&gt;setReason()</code> - replaced by <code>setDisconnectReason()</code> and <code>setDisconnectScreenMessage()</code></li>
<li><code>PlayerDuplicateLoginEvent-&gt;getDisconnectMessage()</code> - replaced by <code>getDisconnectReason()</code> and <code>getDisconnectScreenMessage()</code></li>
<li><code>PlayerDuplicateLoginEvent-&gt;setDisconnectMessage()</code> - replaced by <code>setDisconnectReason()</code> and <code>setDisconnectScreenMessage()</code></li>
</ul>
</li>
<li>The following new API methods have been added:<ul>
<li><code>public PlayerKickEvent-&gt;getDisconnectReason() : Translatable|string</code> - returns the reason for the disconnection displayed in the console and server log</li>
<li><code>public PlayerKickEvent-&gt;setDisconnectReason(Translatable|string $disconnectReason) : void</code> - sets the reason for the disconnection displayed in the console and server log</li>
<li><code>public PlayerKickEvent-&gt;getDisconnectScreenMessage() : Translatable|string|null</code> - returns the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>getDisconnectReason()</code> is used if null is returned)</li>
<li><code>public PlayerKickEvent-&gt;setDisconnectScreenMessage(Translatable|string|null $disconnectScreenMessage) : void</code> - sets the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>setDisconnectReason()</code> is used if null is passed)</li>
<li><code>public PlayerDuplicateLoginEvent-&gt;getDisconnectReason() : Translatable|string</code> - returns the reason for the disconnection displayed in the console and server log</li>
<li><code>public PlayerDuplicateLoginEvent-&gt;setDisconnectReason(Translatable|string $disconnectReason) : void</code> - sets the reason for the disconnection displayed in the console and server log</li>
<li><code>public PlayerDuplicateLoginEvent-&gt;getDisconnectScreenMessage() : Translatable|string|null</code> - returns the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>getDisconnectReason()</code> is used if null is returned)</li>
<li><code>public PlayerDuplicateLoginEvent-&gt;setDisconnectScreenMessage(Translatable|string|null $disconnectScreenMessage) : void</code> - sets the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>setDisconnectReason()</code> is used if null is passed)</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1449"></a>
&lt;tt&gt;pocketmine\network&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>NetworkSessionManager-&gt;close()</code> now accepts an additional <code>Translatable|string|null $disconnectScreenMessage</code> parameter.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1450"></a>
&lt;tt&gt;pocketmine\player&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>Player-&gt;kick()</code> now accepts an additional <code>Translatable|string|null $disconnectScreenMessage</code> parameter, which is the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>$reason</code> is used if null is passed)</li>
<li><code>Player-&gt;disconnect()</code> now accepts an additional <code>Translatable|string|null $disconnectScreenMessage</code> parameter, which is the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen (the message in <code>$reason</code> is used if null is passed)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1451"></a>
Internals</h2>
<ul>
<li><code>NetworkSession</code> disconnect methods have been altered <a class="el" href="protocolto-p.html">to</a> allow specifying a different disconnect reason and disconnection screen message.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1452"></a>
5.0.0-ALPHA9</h1>
<p>Released 21st February 2023.</p>
<h2><a class="anchor" id="autotoc_md1453"></a>
Core</h2>
<ul>
<li>Introduced timings for individual packet encoding.</li>
<li>Network timings now cover more parts of the network system which weren't previously accounted for.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1454"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md1455"></a>
&lt;tt&gt;pocketmine\block&lt;/tt&gt;</h3>
<ul>
<li>Blocks are no longer required <a class="el" href="protocolto-p.html">to</a> explicitly specify how many type or state data bits they require. This is now automatically calculated using <code>RuntimeDataSizeCalculator</code>.</li>
<li>The following API methods have changed signatures:<ul>
<li><code>Block-&gt;describeState()</code> now accepts <code>RuntimeDataDescriber</code> instead of <code>RuntimeDataReader|RuntimeDataWriter</code></li>
<li><code>Block-&gt;describeType()</code> now accepts <code>RuntimeDataDescriber</code> instead of <code>RuntimeDataReader|RuntimeDataWriter</code></li>
<li><code>Block-&gt;getRequiredStateDataBits()</code> is now <code>final</code>.</li>
<li><code>Block-&gt;getRequiredTypeDataBits()</code> is now <code>final</code>.</li>
<li><code>Leaves-&gt;__construct()</code> now <code>LeavesType $leavesType</code> instead of <code>TreeType $treeType</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public Leaves-&gt;getLeavesType() : LeavesType</code> - returns the type of leaves</li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>LeavesType</code> - an enum of all the different types of leaves</li>
</ul>
</li>
<li>The following classes have been renamed:<ul>
<li><code>BlockFactory</code> -&gt; <code>RuntimeBlockStateRegistry</code> - this more accurately describes the purpose of the class</li>
</ul>
</li>
<li>The following API methods have changed behaviour:<ul>
<li><code>RuntimeBlockStateRegistry-&gt;register()</code> now throws a <code>LogicException</code> if a block does not properly reject invalid state data.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1456"></a>
&lt;tt&gt;pocketmine\command&lt;/tt&gt;</h3>
<ul>
<li><code>SimpleCommandMap</code> now requires all commands <a class="el" href="protocolto-p.html">to</a> have a permission set when registered.<ul>
<li>If you actually want <a class="el" href="protocolto-p.html">to</a> allow everyone <a class="el" href="protocolto-p.html">to</a> use your command (not advised), you can add a new permission <a class="el" href="protocolto-p.html">to</a> the <code>pocketmine.group.user</code> group, or use <code>default: true</code> for <code>plugin.yml</code> permissions.</li>
</ul>
</li>
<li>The following API methods have changed behaviour:<ul>
<li><code>Command-&gt;testPermissionSilent()</code> now returns <code>false</code> if there are no permissions associated with the command. This is <a class="el" href="protocolto-p.html">to</a> prevent commands with no permissions being usable by everyone, which has previously been a source of security issues.</li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public Command-&gt;getPermissions() : list&lt;string&gt;</code> - returns a list of permissions which grant usage access <a class="el" href="protocolto-p.html">to</a> this command. A user with one or more of these permissions will be able <a class="el" href="protocolto-p.html">to</a> invoke the command's <code>execute()</code> method</li>
<li><code>public Command-&gt;setPermissions(list&lt;string&gt; $permissions) : void</code> - sets the permissions which grant usage access <a class="el" href="protocolto-p.html">to</a> this command. This should be used instead of <code>setPermission()</code> with <code>;</code> separators (which is now deprecated)</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1457"></a>
&lt;tt&gt;pocketmine\data\bedrock\block&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been added:<ul>
<li><code>public static BlockStateData::current(string $name, array&lt;string, Tag&gt; $states) : BlockStateData</code> - creates a new <code>BlockStateData</code> instance with the current blockstate version</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1458"></a>
&lt;tt&gt;pocketmine\data\bedrock\block\upgrade&lt;/tt&gt;</h3>
<ul>
<li>Blockstate upgrade schemas are now indexed by schema ID instead of Minecraft version. This is because the Minecraft blockstate version isn't consistently bumped when changes are made.</li>
<li><code>BlockStateUpgrader</code> now requires that every schema added must have a unique schema ID.</li>
<li>The following API methods have been removed:<ul>
<li><code>BlockStateUpgradeSchema-&gt;getPriority()</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public BlockStateUpgradeSchema-&gt;getSchemaId() : int</code> - returns the schema ID of this upgrade schema, usually the number at the start of the JSON filename</li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>BlockStateUpgradeSchemaUtils::fromJsonModel()</code> now accepts <code>int $schemaId</code> instead of <code>int $priority</code></li>
<li><code>BlockStateUpgradeSchemaUtils::loadSchemaFromString()</code> now accepts <code>int $schemaId</code> instead of <code>int $priority</code></li>
<li><code>BlockStateUpgradeSchemaUtils::loadSchemas()</code> now accepts <code>int $maxSchemaId</code> instead of <code>int $currentVersion</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1459"></a>
&lt;tt&gt;pocketmine\data\bedrock\item\upgrade&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have changed signatures:<ul>
<li><code>ItemUpgradeSchemaUtils::loadSchemas()</code> now accepts <code>int $maxSchemaId</code></li>
</ul>
</li>
<li>The following API methods have been renamed:<ul>
<li><code>ItemIdMetaUpgradeSchema-&gt;getPriority()</code> -&gt; <code>ItemIdMetaUpgradeSchema-&gt;getSchemaId()</code></li>
</ul>
</li>
<li>The following classes have been added:<ul>
<li><code>ItemIdMetaUpgrader</code> - encapsulates handling for upgrading item string IDs and meta <a class="el" href="protocolto-p.html">to</a> newer versions</li>
</ul>
</li>
<li>The following API methods have been moved:<ul>
<li><code>ItemDataUpgrader-&gt;addIdMetaUpgradeSchema()</code> -&gt; <code>ItemIdMetaUpgrader-&gt;addSchema()</code></li>
<li><code>ItemDataUpgrader-&gt;upgradeItemStringIdMeta()</code> -&gt; <code>ItemIdMetaUpgrader-&gt;upgrade()</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1460"></a>
&lt;tt&gt;pocketmine\data\runtime&lt;/tt&gt;</h3>
<ul>
<li>The following interfaces have been added:<ul>
<li><code>RuntimeDataDescriber</code> - contract for symmetric APIs exposed by <code>RuntimeDataReader</code>, <code>RuntimeDataWriter</code> and <code>RuntimeDataSizeCalculator</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1461"></a>
&lt;tt&gt;pocketmine\event\player&lt;/tt&gt;</h3>
<ul>
<li><code>PlayerPreLoginEvent</code> now supports setting separate log reasons (disconnect reason) and disconnect screen messages.</li>
<li>The following classes have inheritance changes:<ul>
<li><code>PlayerPreLoginEvent</code> no longer implements <code>Cancellable</code>. This caused unexpected behaviour for most plugin devs due <a class="el" href="protocolto-p.html">to</a> default-ignoring cancelled events, forcing people <a class="el" href="protocolto-p.html">to</a> usually have <a class="el" href="protocolto-p.html">to</a> use <code>@handleCancelled</code> <a class="el" href="protocolto-p.html">to</a> handle the event when they wanted <a class="el" href="protocolto-p.html">to</a> use it.</li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public PlayerPreLoginEvent-&gt;getDisconnectScreenMessage(int $flag) : Translatable|string|null</code> - returns the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen for the specified kick flag, if set</li>
<li><code>public PlayerPreLoginEvent-&gt;getFinalDisconnectScreenMessage() : Translatable|string|null</code> - returns the message <a class="el" href="protocolto-p.html">to</a> be displayed on the disconnect screen, taking into account the kick flags set</li>
</ul>
</li>
<li>The following API constants have been renamed:<ul>
<li><code>PlayerPreLoginEvent::KICK_REASON_BANNED</code> -&gt; <code>PlayerPreLoginEvent::KICK_FLAG_BANNED</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_PLUGIN</code> -&gt; <code>PlayerPreLoginEvent::KICK_FLAG_PLUGIN</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_PRIORITY</code> -&gt; <code>PlayerPreLoginEvent::KICK_FLAG_PRIORITY</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_SERVER_FULL</code> -&gt; <code>PlayerPreLoginEvent::KICK_FLAG_SERVER_FULL</code></li>
<li><code>PlayerPreLoginEvent::KICK_REASON_SERVER_WHITELISTED</code> -&gt; <code>PlayerPreLoginEvent::KICK_FLAG_SERVER_WHITELISTED</code></li>
</ul>
</li>
<li>The following API methods have been renamed:<ul>
<li><code>PlayerPreLoginEvent-&gt;clearAllKickReasons()</code> -&gt; <code>PlayerPreLoginEvent-&gt;clearAllKickFlags()</code></li>
<li><code>PlayerPreLoginEvent-&gt;clearKickReason()</code> -&gt; <code>PlayerPreLoginEvent-&gt;clearKickFlag()</code></li>
<li><code>PlayerPreLoginEvent-&gt;getFinalKickMessage()</code> -&gt; <code>PlayerPreLoginEvent-&gt;getFinalDisconnectReason()</code> (now used for logs only, if a disconnect screen message is set for the highest priority flag)</li>
<li><code>PlayerPreLoginEvent-&gt;getKickMessage()</code> -&gt; <code>PlayerPreLoginEvent-&gt;getDisconnectReason()</code> (now used for logs only, if a disconnect screen message is set for the flag)</li>
<li><code>PlayerPreLoginEvent-&gt;getKickReasons()</code> -&gt; <code>PlayerPreLoginEvent-&gt;getKickFlags()</code></li>
<li><code>PlayerPreLoginEvent-&gt;isKickReasonSet()</code> -&gt; <code>PlayerPreLoginEvent-&gt;isKickFlagSet()</code></li>
<li><code>PlayerPreLoginEvent-&gt;setKickReason()</code> -&gt; <code>PlayerPreLoginEvent-&gt;setKickFlag()</code></li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>PlayerPreLoginEvent-&gt;setKickFlag()</code> (previously <code>setKickReason()</code>) now accepts <code>Translatable|string $disconnectReason, Translatable|string|null $disconnectScreenMessage = null</code> instead of <code>Translatable|string $message</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1462"></a>
&lt;tt&gt;pocketmine\event\block&lt;/tt&gt;</h3>
<ul>
<li>The following classes have inheritance changes:<ul>
<li><code>BlockPlaceEvent</code> no longer extends <code>BlockEvent</code>, and therefore no longer has <code>getBlock()</code>.</li>
</ul>
</li>
<li>The following API methods have been removed:<ul>
<li><code>BlockPlaceEvent-&gt;getBlockReplaced()</code> - this information is now provided in the <code>BlockTransaction</code> object returned by <code>BlockPlaceEvent-&gt;getTransaction()</code></li>
</ul>
</li>
<li>The following API methods have been added:<ul>
<li><code>public BlockPlaceEvent-&gt;getTransaction() : BlockTransaction</code> - returns the transaction containing a list of changed block positions and the blockstates they will be changed <a class="el" href="protocolto-p.html">to</a></li>
</ul>
</li>
<li>The following API methods have changed signatures:<ul>
<li><code>BlockPlaceEvent-&gt;__construct()</code> now accepts <code>BlockTransaction $transaction</code> instead of <code>Block $blockPlace, Block $blockReplace</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1463"></a>
&lt;tt&gt;pocketmine\item&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have signature changes:<ul>
<li><code>Item-&gt;describeType()</code> now accepts <code>RuntimeDataDescriber</code> instead of <code>RuntimeDataReader|RuntimeDataWriter</code></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md1464"></a>
&lt;tt&gt;pocketmine\world\format&lt;/tt&gt;</h3>
<ul>
<li>The following API methods have been renamed:<ul>
<li><code>Chunk-&gt;getFullBlock()</code> -&gt; <code>Chunk-&gt;getBlockStateId()</code></li>
<li><code>Chunk-&gt;setFullBlock()</code> -&gt; <code>Chunk-&gt;setBlockStateId()</code></li>
<li><code>SubChunk-&gt;getFullBlock()</code> -&gt; <code>SubChunk-&gt;getBlockStateId()</code></li>
<li><code>SubChunk-&gt;setFullBlock()</code> -&gt; <code>SubChunk-&gt;setBlockStateId()</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md1465"></a>
Gameplay</h2>
<h3><a class="anchor" id="autotoc_md1466"></a>
Blocks</h3>
<ul>
<li>The following new blocks have been added:<ul>
<li>Mangrove Leaves</li>
<li>Azalea Leaves</li>
<li>Flowering Azalea Leaves</li>
<li>Reinforced Deepslate</li>
</ul>
</li>
<li>Fixed incorrect drops of deepslate when mined without a Silk Touch tool.</li>
<li>Bells now ring when hit by a projectile.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1467"></a>
Internals</h2>
<ul>
<li><code>build/generate-runtime-enum-serializers.php</code> now generates the following additional classes:<ul>
<li><code>interface RuntimeEnumDescriber</code></li>
<li><code>trait RuntimeEnumSizeCalculatorTrait</code></li>
</ul>
</li>
<li>Block type/state data required bits are now calculated from <code>Block-&gt;describeType()</code> using <code>RuntimeDataSizeCalculator</code>.</li>
<li>Commands now use an array for permissions internally, instead of a string separated by <code>;</code>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Généré par&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
